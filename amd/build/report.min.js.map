{"version":3,"file":"report.min.js","sources":["../src/report.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    var ltcreport = {\n\n        init: function() {\n            $('#ltc-event-filter-toggle-handle').bind('click', this.rule_filter_toggle);\n            $('#ltc-add-rule').bind('click', this.load_filter_rule_form);\n            log.debug(\"AMD Ltc reports initialized\");\n        },\n\n        load_filter_rule_form: function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            var that = $(this);\n            var cmid = that.attr('data-cmid');\n            var component = that.attr('data-component');\n            var view = that.attr('data-view');\n            var itemid = that.attr('data-itemid');\n\n            var url = cfg.wwwroot;\n            url += '/' + component;\n            url += '/learningtimecheck/ajax/services.php?';\n            url += 'id=' + cmid;\n            url += '&what=getfilterruleform';\n            url += '&view=' + view;\n            url += '&itemid=' + itemid;\n\n            $.get(url, function(data) {\n                $('#ltc-filter-new-rule').html(data);\n                $('#ltc-filter-new-rule').removeClass('hidden');\n                $('#ltc-new-rule-cancel').bind('click', ltcreport.cancel_filter_rule_form);\n            });\n\n            return false;\n        },\n\n        cancel_filter_rule_form: function () {\n            $('#ltc-filter-new-rule').html('');\n            $('#ltc-filter-new-rule').addClass('hidden');\n        },\n\n        rule_filter_toggle: function (e) {\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            var filterformid = '#ltc-event-filter-form';\n            if ('none' == $(filterformid).css('display')) {\n                $(filterformid).css('display', 'block');\n                $('#ltc-event-filter-toggle-handle i').removeClass('fa-plus');\n                $('#ltc-event-filter-toggle-handle i').addClass('fa-minus');\n                $('#ltc-event-filter-toggle-handle').attr('aria-expanded', true);\n            } else {\n                $(filterformid).css('display', 'none');\n                $('#ltc-event-filter-toggle-handle i').removeClass('fa-minus');\n                $('#ltc-event-filter-toggle-handle i').addClass('fa-plus');\n                $('#ltc-event-filter-toggle-handle').attr('aria-expanded', false);\n            }\n\n            return false;\n        }\n    };\n\n    return ltcreport;\n});"],"names":["define","$","log","cfg","ltcreport","init","bind","this","rule_filter_toggle","load_filter_rule_form","debug","e","preventDefault","stopPropagation","that","cmid","attr","component","view","itemid","url","wwwroot","get","data","html","removeClass","cancel_filter_rule_form","addClass","css"],"mappings":"AAkBAA,sCAAO,CAAC,SAAU,WAAY,gBAAgB,SAASC,EAAGC,IAAKC,SAEvDC,UAAY,CAEZC,KAAM,WACFJ,EAAE,mCAAmCK,KAAK,QAASC,KAAKC,oBACxDP,EAAE,iBAAiBK,KAAK,QAASC,KAAKE,uBACtCP,IAAIQ,MAAM,gCAGdD,sBAAuB,SAAUE,GAE7BA,EAAEC,iBACFD,EAAEE,sBAEEC,KAAOb,EAAEM,MACTQ,KAAOD,KAAKE,KAAK,aACjBC,UAAYH,KAAKE,KAAK,kBACtBE,KAAOJ,KAAKE,KAAK,aACjBG,OAASL,KAAKE,KAAK,eAEnBI,IAAMjB,IAAIkB,eACdD,KAAO,IAAMH,UACbG,KAAO,wCACPA,KAAO,MAAQL,KACfK,KAAO,0BACPA,KAAO,SAAWF,KAClBE,KAAO,WAAaD,OAEpBlB,EAAEqB,IAAIF,KAAK,SAASG,MAChBtB,EAAE,wBAAwBuB,KAAKD,MAC/BtB,EAAE,wBAAwBwB,YAAY,UACtCxB,EAAE,wBAAwBK,KAAK,QAASF,UAAUsB,6BAG/C,GAGXA,wBAAyB,WACrBzB,EAAE,wBAAwBuB,KAAK,IAC/BvB,EAAE,wBAAwB0B,SAAS,WAGvCnB,mBAAoB,SAAUG,GAE1BA,EAAEC,iBACFD,EAAEE,wBAGE,QAAUZ,EADK,0BACW2B,IAAI,YAC9B3B,EAFe,0BAEC2B,IAAI,UAAW,SAC/B3B,EAAE,qCAAqCwB,YAAY,WACnDxB,EAAE,qCAAqC0B,SAAS,YAChD1B,EAAE,mCAAmCe,KAAK,iBAAiB,KAE3Df,EAPe,0BAOC2B,IAAI,UAAW,QAC/B3B,EAAE,qCAAqCwB,YAAY,YACnDxB,EAAE,qCAAqC0B,SAAS,WAChD1B,EAAE,mCAAmCe,KAAK,iBAAiB,KAGxD,WAIRZ"}